{% extends '@YesknBlog/base.html.twig' %}

{% block main %}
    <style>
        .content-main {
            background: #fff;
        }
    </style>
    {% for post in posts %}
        <article class="main" style="position: relative">
            <div class="row">
                {% set col = post.cover ? "col-md-8" : "col-md-12" %}
                <div class="{{ col }}">
                    <span class="item-title">
                        <a data-pjax href="{{ path('yeskn_blog_show' , {'id' : post.id}) }}">{{ post.title }}</a>
                    </span>
                    <p class="post-meta">
                        <span><i class="fa fa-user"></i> <a data-pjax
                                                            href="{{ path('user_home', {username: post.author.username}) }}">{{ post.author.nickname }}</a></span>
                        <span><i class="fa fa-clock-o"></i> {{ post.createdAt|date("Y-m-d") }}</span>
                        <span><i class="fa fa-eye"></i> {{ post.views }}</span>
                        <span><i class="fa fa-commenting-o"></i> {{ post.comments.count }}</span>
                        {% if post.categories is not null %}
                            <span><i class="fa  fa-folder-o"></i>
                                {% for cat in post.categories %}
                                    {{ cat.name }}
                                {% endfor %}
                                </span>
                        {% endif %}
                    </p>
                    <div>
                        {{ post.excerpt|length > 78 ? post.excerpt|slice(0, 78) ~ '...' : post.excerpt }}
                    </div>
                </div>
                {% if post.cover %}
                    <div class="col-md-4">
                        <img src="{{ post.cover }}" alt="" height="auto" width="auto"/>
                    </div>
                {% endif %}
            </div>
            {% if post.tags is not empty %}
                <div style="position: relative;bottom:-10px">
                    <p>
                        <i class="fa  fa-tags item-tag"></i>
                        {% for tag in post.tags %}
                           <span class="item-tag"> {{ tag.name }} </span>
                        {% endfor %}
                    </p>
                </div>
            {% endif %}
        </article>
    {% else %}
        <div class="well">{{ '暂时没有任何文档！' }}</div>
    {% endfor %}
    <ul class="pagination">
        {% if pageData['currentPage']-1 <= 0 %}
            <li class="disabled">
                <a href="#">&laquo;</a>
            </li>
        {% else %}
            <li>
                <a href="{{ path('blog_index_paginated',{'page':pageData['currentPage']-1}) }}" data-pjax>&laquo;</a>
            </li>
        {% endif %}

        {% for p in 1..pageData['allPage'] %}
            {% if p == pageData['currentPage'] %}
                <li class="active"><a href="javascript:">{{ p }}</a></li>
            {% else %}
                <li><a href="{{ path('blog_index_paginated',{'page':p}) }}" data-pjax>{{ p }}</a></li>
            {% endif %}

        {% endfor %}
        <li {% if pageData['currentPage']+1 > pageData['allPage'] %} class="disabled" {% endif %}>
            <a href="{{ path('blog_index_paginated',{'page':pageData['currentPage']+1}) }}" data-pjax>&raquo;
            </a>
        </li>
    </ul>
{% endblock %}

