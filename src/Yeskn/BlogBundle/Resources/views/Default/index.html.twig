{% extends '@YesknBlog/base.html.twig' %}

{% block main %}
    <div class="home-content-main">
        {% if posts is not empty %}
            {% for post in posts %}
                <article class="main" style="position: relative">
                    <div class="row">
                        <div class="col-md-1 post-avatar">
                            <img src="{{ post.author.avatar }}" alt="">
                        </div>
                        <div class="col-md-11 post-info">
                    <span class="item-title">
                        <a data-pjax href="{{ path('yeskn_blog_show' , {'id' : post.id}) }}">{{ post.title }}</a>
                    </span>
                            <p class="post-meta">
                        <span><i class="fa fa-user"></i>
                            <a data-pjax href="{{ path('user_home', {username: post.author.username}) }}">{{ post.author.nickname }}</a></span>

                                {% if post.categories is not null %}
                                    <span class="category">
                                        {% for cat in post.categories %}
                                            <a href="#" class="badge">{{ cat.name }}</a>
                                        {% endfor %}
                                    </span>
                                {% endif %}

                                <span><i class="fa fa-clock-o"></i> {{ post.createdAt|ago }}</span>
                                <span><i class="fa fa-eye"></i> {{ post.views }}</span>
                                {% if post.comments.count %}
                                    <span><i class="fa fa-commenting-o"></i> <a data-pjax
                                                                                href="{{ path('yeskn_blog_show', {id:post.id}) }}#comments">{{ post.comments.count }}</a></span>
                                {% endif %}
                            </p>
                        </div>
                    </div>
                    {#{% if post.tags is not empty %}#}
                    {#<div style="position: relative;bottom:-10px">#}
                    {#<p>#}
                    {#<i class="fa  fa-tags item-tag"></i>#}
                    {#{% for tag in post.tags %}#}
                    {#<span class="item-tag"> {{ tag.name }} </span>#}
                    {#{% endfor %}#}
                    {#</p>#}
                    {#</div>#}
                    {#{% endif %}#}
                </article>
            {% endfor %}
        {% else %}
            <div class="well">{{ '暂时没有任何文档！' }}</div>
        {% endif %}
        <ul class="pagination">
            {% if pageData.currentPage -1 <= 0 %}
                <li class="disabled">
                    <a href="#">&laquo;</a>
                </li>
            {% else %}
                <li>
                    <a href="{{ path('blog_index_paginated',{'page':pageData['currentPage']-1}) }}" data-pjax>&laquo;</a>
                </li>
            {% endif %}

            {% if pageData.currentPage > 3 %}
                <li class="disabled">
                    <a href="#">...</a>
                </li>
            {% endif %}

            {% for p in 1..pageData.allPage %}
                {% if p < pageData.currentPage - 2 %}
                {% endif %}

                {% if p == pageData.currentPage %}
                    <li class="active"><a href="javascript:">{{ p }}</a></li>
                {% endif %}


                {% if p >= pageData.currentPage - 2 and p != pageData.currentPage and p <= pageData.currentPage+2 %}
                    <li><a href="{{ path('blog_index_paginated',{'page':p}) }}" data-pjax>{{ p }}</a></li>
                {% endif %}


                {% if p > pageData.currentPage+2 %}
                {% endif %}
            {% endfor %}

            {% if pageData.allPage > pageData.currentPage+2 %}
                <li class="disabled">
                    <a href="#">...</a>
                </li>
            {% endif %}


            <li {% if pageData.currentPage == pageData.allPage %} class="disabled" {% endif %}>
                <a href="{{ path('blog_index_paginated',{'page':pageData['currentPage']+1}) }}" data-pjax>&raquo;
                </a>
            </li>
        </ul>
    </div>
{% endblock %}

